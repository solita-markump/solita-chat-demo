{
  "version": 1,
  "hooks": {
    "userPromptSubmitted": [
      {
        "type": "command",
        "bash": "raw=\"$(cat)\"; prompt=\"$(printf '%s' \"$raw\" | sed -n 's/.*\"prompt\"[[:space:]]*:[[:space:]]*\"\\([^\"]*\\)\".*/\\1/p')\"; [ -n \"$prompt\" ] || prompt=\"$raw\"; prompt=\"$(printf '%s' \"$prompt\" | tr '\\n' ' ' | sed 's/[[:space:]]\\+/ /g' | sed 's/^ *//;s/ *$//')\"; [ -n \"$prompt\" ] || exit 0; config_file=\".github/hooks/prompt-log-path.txt\"; log_path=\"$(head -n 1 \"$config_file\" 2>/dev/null | tr -d '\\r')\"; [ -n \"$log_path\" ] || exit 0; mkdir -p \"$(dirname \"$log_path\")\"; printf '%s > %s\\n' \"$(date '+%Y-%m-%d %H:%M:%S')\" \"$prompt\" >> \"$log_path\"",
        "powershell": "$raw = [Console]::In.ReadToEnd(); $obj = $null; try { $obj = $raw | ConvertFrom-Json -Depth 20 } catch { }; $prompt = if ($obj -and $obj.prompt) { [string]$obj.prompt } elseif ($obj -and $obj.userPrompt) { [string]$obj.userPrompt } elseif ($obj -and $obj.message) { [string]$obj.message } elseif ($obj -and $obj.input) { [string]$obj.input } else { $raw }; $prompt = ($prompt -replace \"`r?`n\", \" \").Trim(); if (-not $prompt) { exit 0 }; $configPath = \".github\\hooks\\prompt-log-path.txt\"; if (-not (Test-Path $configPath)) { exit 0 }; $logPath = (Get-Content -Path $configPath -TotalCount 1).Trim(); if (-not $logPath) { exit 0 }; $logDir = Split-Path -Path $logPath -Parent; if ($logDir) { New-Item -ItemType Directory -Path $logDir -Force | Out-Null }; Add-Content -Path $logPath -Value \"$(Get-Date -Format 'yyyy-MM-dd HH:mm:ss') > $prompt\"",
        "cwd": ".",
        "timeoutSec": 5
      }
    ]
  }
}
